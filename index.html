<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bypassing ad blockers for Google Analytics</title>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.4/css/bulma.min.css">

    <script src="gtm-bypass-adblockers.js"></script>
    <script src="analytics-bypass-adblockers.js"></script>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript>
    <iframe src="https://analytics-bypassing-adblockers.netlify.com/proxy/https://www.googletagmanager.com/ns.html?id=GTM-PDMCJXV"
            height="0" width="0" style="display:none;visibility:hidden"></iframe>
</noscript>
<!-- End Google Tag Manager (noscript) -->


<section class="section">
    <div class="container">
        <div class="content">
            <h1 class="title">Bypassing ad blockers for Google Analytics</h1>
            <p>
                <a href="https://github.com/StefanoChiodino/analytics-bypassing-adblockers">
                    <img src="https://img.shields.io/github/stars/StefanoChiodino/analytics-bypassing-adblockers.svg?style=social"
                         alt="Github badge"/>
                </a>
            </p>
            <p class="subtitle">Is scarily easy to bypass ad blockers to serve Google Tag Manager and
                Analytics.</p>

            <div class="tile" id="gtm-target">This content should be overridden by GTM.</div>

            <h2>But how?</h2>

            <p class="subtitle">Ingenuity, reverse proxy, string manipulation.</p>

            <ul>
                <li>Ingenuity in thinking that I can bypass <a
                        href="https://github.com/gorhill/uBlock">uBlock</a> (❤️).
                </li>
                <li>Reverse proxy to hide the real source of the javascript. Here is provided for free by
                    Netlify (❤️) and configured in the netlify.toml file of the repository.
                </li>
            </ul>

            <h2>Setup a reverse proxy with Netlify</h2>
            <p>It's as easy as adding this file with a catch-all proxy and a specific proxy to rename collect to
                colect to fool <a href="https://easylist.to/">EasyList</a>.</p>
            <p>
                <script src="https://gist-it.appspot.com/https://github.com/StefanoChiodino/analytics-bypassing-adblockers/blob/master/netlify.toml"></script>
            </p>

            <h2>Use reverse proxy for Google Tag Manager</h2>

            <p>This is a matter of simply prefixing the URL of GTM with your reverse proxy. This is enough for ad
                blockers to not know that this is GTM.</p>
            <p>
                <script src="https://gist-it.appspot.com/https://github.com/StefanoChiodino/analytics-bypassing-adblockers/blob/master/gtm-bypass-adblockers.js"></script>
            </p>

            <h2>Use reverse proxy for Google Analytics and rewrite its content to make it use the reverse proxy</h2>

            <p>This is slightly more involved. Not only we are using the reverse proxy, but we also need to change
                the content of it to make it use our reverse proxy itself</p>
            <p>We fetch the script, rewrite some urls inside to add the reverse proxy, then we add the script to the
                page.</p>
            <p>
                <script src="https://gist-it.appspot.com/https://github.com/StefanoChiodino/analytics-bypassing-adblockers/blob/master/analytics-bypass-adblockers.js"></script>
            </p>

            <h2>Tested with</h2>
            <ul>
                <li>uBlock + Chrome</li>
                <li><a href="https://github.com/StevenBlack/hosts">Steven Black's</a> domains list</li>
            </ul>

            <div class="columns">
                <div class="column is-6">
                    <div class="card">
                        <header class="card-header">
                            <p class="card-header-title">
                                Author
                            </p>
                        </header>
                        <div class="card-content">
                            <div class="media">
                                <div class="media-left">
                                    <figure class="image">
                                        <img src="https://en.gravatar.com/userimage/22879554/be0064193aae6aa16038cfc7edac6b31?s=80"
                                             alt="Placeholder image" width="80" height="80">
                                    </figure>
                                </div>
                                <div class="media-content">
                                    <p class="title is-4">Stefano Chiodino</p>
                                    <p class="subtitle is-6"><a
                                            href="https://twitter.com/chiodinostefano">@chiodinostefano</a>
                                    </p>
                                    <p class="subtitle is-6"><a
                                            href="https://stefano.chiodino.uk">stefano.chiodino.uk</a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="box">
                <script src="https://utteranc.es/client.js"
                    repo="StefanoChiodino/analytics-bypassing-adblockers"
                    issue-term="homepage"
                    theme="github-light"
                    crossorigin="anonymous"
                    async>
            </div>
                    
        </div>
    </div>
</section>
</script>
</body>
</html>
